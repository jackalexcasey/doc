#ifndef _CLOCK_H_
#define _CLOCK_H_

/*
 * Basic definition
 */
#define USEC_PER_SEC	1000000
#define NSEC_PER_SEC	1000000000
#define TIMER_JITTER_NSEC_PERIOD	100000 	

#define TIMER_RELTIME 0

/* Define the operation mode i.e. timer based OR LPJ */
#define __TIMER__
#define __BUCKET_BASED_DATA__

/*
 * Original data
 * 1ade8801c81e 14595 246561488 0 100 200 300 400 500 600 700 800 900 1000 1100
 * 1adf8801c7da 14587 266474548 0 100 200 300 400 500 600 700 800 900 1000 1100
 * 1ae08801c7ae 14581 286372618 0 100 200 300 400 500 600 700 800 900 1000 1100
 * 1ae18801c6f2 14558 306263683 0 100 200 300 400 500 600 700 800 900 1000 1100
 * 1ae28801c20e 14401 327641842 0 100 200 300 400 500 600 700 800 900 1000 1100
 * 1ae38801b97a 14127 359625842 0 100 200 300 400 500 600 700 800 900 1000 1100
 *
 * In non bucket based implementation:
 * 1ad88801c988 14641 23194049 9 259 509 758 1008 1258 1508 0 0 0 0 0
 * 1ad98801c8b0 14614 31068444 2 252 502 752 1002 1250 1500 0 0 0 0 0
 * 1ada8801c9b4 14646 38951947 14 264 514 763 1013 1263 1513 0 0 0 0 0
 * 1adb8801c804 14592 46829051 4 254 504 753 1003 1253 1503 0 0 0 0 0
 * 1adc8801c880 14608 54697456 0 251 501 751 1001 1249 1499 0 0 0 0 0
 * 1add8801c8ec 14621 62555661 0 248 498 747 997 1245 1495 0 0 0 0 0
 * 1ade8801c8ec 14621 70426633 7 257 507 757 1007 1255 1505 0 0 0 0 0
 * 1adf8801c928 14629 78316608 12 262 512 762 1012 1260 1510 0 0 0 0 0
 * 1ae08801c930 14630 86164082 16 266 516 766 1016 1264 1514 0 0 0 0 0
 * 1ae18801c878 14607 94022363 9 259 509 758 1008 1258 1508 0 0 0 0 0
 *
 * In bucket based implementation
 * 1abe8805f7bc 48887 1319439242 0 98 203 300 398 504 601 706 805 899 998 1098
 * 1abf8805f6e0 48860 1407943714 2 102 194 300 396 502 600 699 792 901 1000 1099
 * 1ac08805f618 48835 1495788733 0 92 197 296 400 498 589 697 796 892 999 1098
 * 1ac18805f69c 48851 1584113233 6 105 203 304 403 501 605 703 806 901 1003 1099
 * 1ac28805f714 48866 1672525072 3 97 200 299 402 502 602 700 803 900 1006 1100
 * 1ac38805f6dc 48859 1760915439 6 100 200 303 406 505 601 700 801 899 997 1097
 * 1ac48805f7ac 48885 1849266746 3 109 201 306 410 501 608 704 811 902 1001 1101
 * 1ac58805f7a8 48885 1937716817 14 90 204 297 407 506 599 694 804 907 1006 1107
 *
 */

//#define __CHARACTERIZATION__

uint64_t rdtsc(void);
uint64_t rdtsc_mfence(void);
uint64_t rdtsc_lfence(void);
uint64_t rdgtod(void);
uint64_t rdclock(void);

/* We use 64bit values for the times.  */
typedef unsigned long long int hp_timing_t;
typedef long long cycles_t;  
typedef uint64_t u64;

hp_timing_t get_clockfreq (void);
inline cycles_t get_cycles(void);
void __ldelay(unsigned long loops);
void __lstream(unsigned long loops);
void calibrated_ldelay(unsigned long loops);
void calibrated_timer(unsigned long loops, struct timespec *ts);

#endif
